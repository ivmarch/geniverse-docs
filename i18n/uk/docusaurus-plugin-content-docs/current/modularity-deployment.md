# Модульність та розгортання

GeniVerse побудований на модульній архітектурі. Це дозволяє розгортати платформу по-різному: як хмарний SaaS, як локальне встановлення (on-prem), у гібридній конфігурації або з периферійними (edge) компонентами для сценаріїв із низькою затримкою.

Модульність дає установам можливість:
- обрати модель розгортання під свої вимоги безпеки та резиденції даних
- поступово нарощувати функціональність без "великих міграцій"
- масштабувати окремі частини системи незалежно

---

## Огляд архітектури

### Модульний підхід

GeniVerse складається з незалежних модулів, які можна розгортати й масштабувати окремо:

- Основні сервіси: автентифікація, користувачі, сесії, профілі, доступи
- Управління контентом: створення, зберігання, доставка, версіонування
- Движок оцінювання: тести, завдання, рубрики, журнал оцінок
- Платформа аналітики: збір подій, обробка, звіти, дашборди
- Шар інтеграцій: API, вебхуки, конектори до LMS та сторонніх сервісів
- Шар ШІ: персоналізація, рекомендації, аналітичні моделі, генерація навчальних артефактів
- XR-компоненти (опційно): WebXR/VR/AR модулі, контент-плеєр, телеметрія взаємодій

> XR та ШІ — модулі, які можуть бути вимкнені або розгорнуті окремо залежно від потреб установи

---

## Мікросервісна модель

### Незалежність сервісів

- сервіси розробляються, оновлюються та масштабуються окремо
- взаємодія відбувається через стандартизовані API
- за потреби використовується окрема база даних на сервіс
- помилки ізольовані, щоб збій одного сервісу не валив платформу

### Комунікація між сервісами

- синхронні запити: REST API (або gRPC, якщо потрібна продуктивність)
- асинхронні події: черги повідомлень і подієва модель (для аналітики, нотифікацій, обробок ШІ)
- уніфікований вхід: API gateway (маршрутизація, rate limiting, логування, авторизація)

---

## Моделі розгортання

### Хмарний SaaS

Платформа розміщена на інфраструктурі GeniVerse, оновлення та обслуговування виконуються централізовано.

Підходить, якщо:
- потрібне швидке впровадження
- установа має обмежені IT-ресурси
- вимоги до резиденції даних не вимагають локального зберігання

Переваги:
- мінімальне навантаження на IT
- автоматичне масштабування
- швидкі оновлення й доступ до нових функцій

---

### Локальне встановлення (on-prem)

Платформа розгортається в інфраструктурі установи з повним контролем над даними й мережевим периметром.

Підходить, якщо:
- діють жорсткі вимоги до резиденції даних
- потрібна повна автономність (наприклад, закриті мережі)
- є власна команда для підтримки інфраструктури

Переваги:
- максимальний контроль над даними та доступами
- гнучке налаштування інтеграцій і політик безпеки
- можливість працювати в умовах обмеженого зовнішнього доступу

---

### Гібридна конфігурація

Частина компонентів працює в хмарі, частина — локально. Наприклад, навчальні дані або ідентифікація зберігаються локально, а масштабовані сервіси (контент-доставка, аналітика, рекомендації) працюють у хмарі.

Підходить, якщо:
- потрібен баланс між контролем та зручністю
- установа мігрує в хмару поетапно
- частину даних треба тримати локально

Переваги:
- гнучке розміщення компонентів
- менші ризики міграції
- оптимізація вартості й продуктивності під конкретний сценарій

---

### Периферійні обчислення (edge)

Окремі компоненти розміщуються ближче до користувачів. Це корисно для XR-сценаріїв і великого мультимедіа, де важлива низька затримка.

Підходить, якщо:
- є інтенсивні XR-сценарії
- навчальні простори географічно розподілені
- обмежена пропускна здатність каналів

Переваги:
- нижча затримка
- менше навантаження на канали зв'язку
- регіональна обробка чутливих даних (за потреби)

---

## Контейнеризація та оркестрація

### Docker

- кожен сервіс постачається як контейнер
- узгоджені середовища для dev/stage/prod
- прості оновлення та масштабування
- ізоляція між сервісами

### Kubernetes (за потреби)

- керування масштабуванням і високою доступністю
- health checks та автоматичне відновлення
- керування секретами та конфігурацією
- Helm charts для відтворюваного деплойменту

---

## Конфігурація та керування функціями

### Джерела конфігурації

- змінні середовища
- конфіг-файли для конкретних середовищ
- менеджери секретів
- зовнішні сервіси конфігурації (за потреби)

### Feature flags

- увімкнення/вимкнення функцій на рівні установи
- поетапні релізи (canary)
- A/B експерименти для педагогічних та UI-гіпотез
- аварійне вимкнення ризикових функцій

---

## Дані та сховища

### Бази даних (типово)

- PostgreSQL: основні реляційні дані
- Redis: кеш, сесії, rate limiting
- Elasticsearch або аналог: пошук по контенту й метаданих (опційно)
- документні сховища: за потреби для контентних структур

### Файлові дані та медіа

- об'єктні сховища (S3-сумісні або аналоги)
- CDN для доставки медіа та навчальних ресурсів
- політики життєвого циклу файлів (архівування, видалення)

---

## Моніторинг і спостережуваність

- централізовані логи (із політиками зберігання)
- метрики сервісів і бізнес-метрики
- алерти (помилки, затримки, деградації)
- аудит подій безпеки та доступів

---

## Резервне копіювання та відновлення

- резервні копії БД і сховищ
- перевірка відновлення на регулярній основі
- плани відновлення після катастроф (DR)

Показники відновлення:
- RPO: максимально допустима втрата даних у часі
- RTO: максимально допустимий час відновлення сервісу

---

## Масштабування та продуктивність

- горизонтальне масштабування сервісів
- кешування та оптимізація запитів
- CDN для статичних і медіа-ресурсів
- окремі профілі продуктивності для XR-сценаріїв (низька затримка)

---

## Оновлення та міграції

- перевірка сумісності версій
- резервне копіювання перед оновленням
- поетапний випуск
- механізми відкату

---

## Рекомендовані практики

- починати з SaaS, якщо немає жорстких вимог до on-prem
- використовувати контейнеризацію для відтворюваності
- впроваджувати моніторинг з першого дня
- планувати масштабування ще на етапі архітектури
- регулярно оновлювати компоненти безпеки
- періодично тестувати процедури відновлення
